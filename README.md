# Release v0.9.0 - スクリーンショット翻訳ツール (OCR & モード選択対応) 

## はじめに
ゲーム画面や画像内の英語テキストに困っていませんか？「スクリーンショット翻訳ツール」は、画面の特定範囲をスクリーンショットし、Google Gemini AI を使って瞬時に翻訳・解説するデスクトップツールです！もう手動で入力したり、コピペできないテキストに悩む必要はありません。

このリリースでは、OCR連携による翻訳精度の向上、用途に合わせたモード選択、そして使いやすさを大幅に改善する新機能を多数追加しました。

## 新機能ハイライト ✨
### 🤖 OCR連携 (オプション):
スクリーンショット画像から直接テキストを抽出できるようになりました！これにより、Gemini AIがより正確な翻訳・解説を行うことが期待できます。
Tesseract OCRエンジンをインストールするだけで利用可能です。インストールされていない場合でも、ツールはOCRなしで動作します。

### 🔄 翻訳 / 解説モード選択:
スクリーンショット後、API送信確認ダイアログで「**翻訳モード**」または「**解説モード**」を選べるようになりました！
* 「**翻訳モード**」：従来の翻訳と簡単な解説を提供します。
* 「**解説モード**」(未実装)：ゲーム内のアイテム、スキル、キャラクターなどについて、まるで攻略サイトのように詳しく解説します。

### 📋 クリップボード連携 (書式保持対応):
翻訳結果や解説テキストをワンクリックでクリップボードにコピー！
ツールからコピーしたテキストは、HTML形式の書式情報も保持します。 Word、メールソフト、対応するテキストエディタなどに貼り付けた場合、太字や箇条書きなどの書式が維持されます。他のアプリへの貼り付けも楽々です！

### ✨ UI改善 & 操作性向上:
* ウィンドウの見た目をQSSファイルで整理し、より洗練されたデザインに。
* 翻訳結果/解説ウィンドウがマウスドラッグで自由に移動・リサイズ可能に！ウィンドウ内のテキスト選択もできるようになりました。
* アプリケーションアイコンを設定し、Windowsのシステムトレイに常駐するようになりました。タスクバーを占領せず、スマートな運用が可能です。

### 📝 ログ機能強化:
アプリの動作状況やエラーが `logs` フォルダ内のログファイルに記録されるようになり、問題発生時の原因特定や報告がよりスムーズに。

### ⚙️ 設定ファイルの自動生成:
`setting.yaml` と `translation_history.json` が初回起動時に自動生成されるようになり、配布がより簡単になりました。

## 主な機能 💡
* ホットキー (デフォルト: 右Alt キー) で範囲選択モードを開始。
* 半透明オーバーレイで直感的なスクリーンショット範囲選択。
* 選択範囲の画像を自動で保存。
* Google Gemini API による高精度な翻訳・解説。
* 常に最前面表示されるフレームレスな結果ウィンドウ。
* 設定ファイル (`setting.yaml`) による柔軟なカスタマイズ。
* API送信前の確認ダイアログ（表示/非表示設定可能）。
* 非同期API処理でGUIはサクサク動作。
* 翻訳履歴機能で過去の翻訳をいつでも確認。
* ホットキーのGUIカスタマイズ機能。(未実装)

---

## 動作環境 💻
* **OS**: Windows
* **インターネット接続**: Google Gemini API 利用のため必須
* **APIキー**: Google Gemini API の API キーが必要です（`.env` ファイルに設定）。

### OCR機能を利用する場合:
* Tesseract OCRエンジン本体のインストールが必要です。なくても動きます。

## インストール方法 🚀
1.  このリリースの `スクリーンショット翻訳ツール_v0.9.0.zip` をダウンロードし、任意の場所に展開します。
2.  展開されたフォルダ内の `main_app.exe` を実行します。
    * 初回起動時に `setting.yaml` (設定ファイル) と `translation_history.json` (翻訳履歴ファイル) が `main_app.exe` と同じディレクトリに自動生成されます。
    * `app_icon.ico` (アプリケーションアイコン) も同じディレクトリに配置されていることを確認してください。なくても動きます。


### Google Gemini API キーの設定:
Google AI StudioでAPIキーを取得し、`main_app.exe` と同じディレクトリに `.env` という名前のファイルを作成し、以下の形式でAPIキーを記述してください。「GEMINI_API_KEY=YOUR_API_KEY_HERE」
もしくは環境変数にGEMINI_API_KEYを作り、値にYOUR_API_KEYを入れてください(こちらのほうがセキュリティ的におすすめ)

### OCR機能を利用する場合 (オプション)(なくても動きます):
1.  [Tesseract OCRの公式GitHubリリース](https://github.com/tesseract-ocr/tesseract/releases) からWindows用インストーラーをダウンロードし、インストールしてください。
2.  インストール時に「**Japanese**」と「**Japanese (vertical)**」の言語データを含めることを忘れないでください。
3.  Tesseractのインストールパスがシステム環境変数 `PATH` に追加されていることを確認してください。もし追加されていない場合、`setting.yaml` を編集し、`ocr_settings.tesseract_path` に `tesseract.exe` のフルパス（例: `C:\Program Files\Tesseract-OCR\tesseract.exe`）を記述してください。

---

## 使い方ガイド 📖
1.  `main_app.exe` を起動します。アプリケーションは自動的にシステムトレイに常駐します。
2.  ホットキー (デフォルト: 右Alt キー　変更可) を押します。
3.  画面が半透明になったら、マウスで翻訳したい範囲をドラッグして選択します。
4.  マウスを離すと、API送信確認ダイアログが表示されます。ここで「**翻訳モード**」または「**解説モード**」を選択し、「はい」をクリックします。
5.  しばらく待つと、翻訳結果/解説ウィンドウが表示されます。
6.  ウィンドウ内の「**すべてコピー**」ボタンでテキストをクリップボードにコピーできます。
    * コピーされたテキストは、対応するアプリケーションに貼り付けると、太字や箇条書きなどの書式が再現されます。
7.  ウィンドウの「**履歴**」ボタンで過去の翻訳履歴を確認できます。
8.  ウィンドウの「**設定**」ボタンでホットキーなどを変更できます。
9.  ウィンドウの「**X**」ボタンや Esc キーでウィンドウを閉じてもアプリは終了せず、システムトレイに隠れます。
10. システムトレイアイコンを右クリックすると「**表示**」「**非表示**」「**終了**」などのメニューが出ます。

## 既知の課題 ⚠️
* OCR機能は、Tesseractの認識精度に依存します。画像が不鮮明な場合や特殊なフォントの場合、正確にテキストを抽出できないことがあります。
* Gemini AIの応答は、プロンプトの内容やAIの知識に依存します。特に解説モードでは、ゲームの最新情報や未公開情報には対応できません。
* PyInstallerで生成されたexeのファイルサイズが比較的大きいです。

---
